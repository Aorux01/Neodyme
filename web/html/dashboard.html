<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Neodyme</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/dashboard.css">
</head>
<body>
    <header class="neodyme-header">
        <div class="header-container">
            <a href="../index.html" class="neodyme-logo">N</a>
            
            <nav class="neodyme-nav">
                <ul class="nav-links">
                    <li><a href="../index.html">HOME</a></li>
                    <li><a href="https://github.com/Aorux01/Neodyme" target="_blank">GITHUB</a></li>
                    <li><a href="updates.html">UPDATES</a></li>
                    <li><a href="shop.html">SHOP</a></li>
                    <li><a href="https://github.com/Aorux01/Neodyme/wiki" target="_blank">DOCS</a></li>
                </ul>
            </nav>
            
            <div class="header-actions">
            </div>
        </div>
    </header>

    <div class="dashboard-container">
        <aside class="dashboard-sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="nav-link active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-link" onclick="showSection('profile')">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
                <a href="#" class="nav-link" onclick="showSection('friends')">
                    <i class="fas fa-users"></i>
                    <span>Friends</span>
                </a>
                <a href="#" class="nav-link" onclick="showSection('sessions')">
                    <i class="fas fa-shield-alt"></i>
                    <span>Security & Sessions</span>
                </a>
                <a href="#" class="nav-link" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <a href="shop.html" class="nav-link">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Item Shop</span>
                </a>
                <a href="purchase.html" class="nav-link">
                    <i class="fas fa-coins"></i>
                    <span>Get V-Bucks</span>
                </a>
                <a href="#" class="nav-link" onclick="showSection('creator-code')">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Creator Code</span>
                </a>
                <a href="#" class="nav-link" onclick="showSection('support')">
                    <i class="fas fa-life-ring"></i>
                    <span>Support</span>
                </a>

                <div class="nav-divider" id="staff-divider" style="display: none;"></div>

                <a href="#" class="nav-link staff-only" id="nav-moderation" onclick="showSection('moderation')" style="display: none;">
                    <i class="fas fa-gavel"></i>
                    <span>Moderation</span>
                </a>
                <a href="#" class="nav-link staff-only" id="nav-developer" onclick="showSection('developer')" style="display: none;">
                    <i class="fas fa-code"></i>
                    <span>Developer</span>
                </a>
                <a href="#" class="nav-link staff-only" id="nav-admin" onclick="showSection('admin')" style="display: none;">
                    <i class="fas fa-crown"></i>
                    <span>Admin Panel</span>
                </a>
            </nav>
        </aside>

        <main class="dashboard-content">
            <div class="alert alert-info" id="alert" style="display: none;">
                <span id="alert-message"></span>
            </div>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section active">
                <div class="content-header">
                    <h2>Welcome back, <span id="welcome-name">Player</span>!</h2>
                    <p>Your Neodyme account overview</p>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="card-title">Victory Royales</div>
                        <div class="card-value" id="victory-royales">0</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-skull"></i>
                        </div>
                        <div class="card-title">Eliminations (K/D)</div>
                        <div class="card-value" id="total-eliminations">0</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-title">Friends Online</div>
                        <div class="card-value" id="friends-online">0</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="card-title">Play Time</div>
                        <div class="card-value" id="play-time">0h</div>
                    </div>
                </div>

                <div class="content-header">
                    <h3>Recent Activity</h3>
                </div>

                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Logged into Neodyme</div>
                            <div class="activity-time">Just now</div>
                        </div>
                    </div>
                    <!-- <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Last match played</div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                    </div> -->
                </div>

                <div class="content-header">
                    <h3>Quick Actions</h3>
                </div>

                <div class="quick-actions">
                    <button class="btn btn-primary" onclick="window.open('https://github.com/Aorux01/all-fortnite-builds', '_blank')">
                        <i class="fas fa-play"></i>
                        Download Game
                    </button>
                    <button class="btn btn-secondary" onclick="showSection('friends')">
                        <i class="fas fa-user-plus"></i>
                        Add Friends
                    </button>
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile-section" class="content-section">
                <div class="content-header">
                    <h2>Profile Settings</h2>
                    <p>Manage your account information</p>
                </div>

                <form class="profile-form" id="profile-form">
                    <div class="form-group">
                        <label for="profile-username" class="form-label">Username</label>
                        <input type="text" id="profile-username" class="form-input" placeholder="Your username">
                    </div>

                    <div class="form-group">
                        <label for="profile-email" class="form-label">Email Address</label>
                        <input type="email" id="profile-email" class="form-input" placeholder="Your email">
                    </div>

                    <div class="form-group">
                        <label for="profile-displayname" class="form-label">Display Name</label>
                        <input type="text" id="profile-displayname" class="form-input" placeholder="Your display name">
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Save Changes
                    </button>
                </form>

                <div class="content-header">
                    <h3>Change Password</h3>
                </div>

                <form class="profile-form" id="password-form">
                    <div class="form-group">
                        <label for="current-password" class="form-label">Current Password</label>
                        <input type="password" id="current-password" class="form-input" placeholder="Enter current password">
                    </div>

                    <div class="form-group">
                        <label for="new-password" class="form-label">New Password</label>
                        <input type="password" id="new-password" class="form-input" placeholder="Enter new password">
                    </div>

                    <div class="form-group">
                        <label for="confirm-password" class="form-label">Confirm New Password</label>
                        <input type="password" id="confirm-password" class="form-input" placeholder="Confirm new password">
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-key"></i>
                        Change Password
                    </button>
                </form>
            </section>

            <!-- Friends Section -->
            <section id="friends-section" class="content-section">
                <div class="content-header">
                    <h2>Friends</h2>
                    <p>Manage your friends list</p>
                </div>

                <div class="friends-search">
                    <input type="text" id="friend-search" class="form-input" placeholder="Search for players...">
                    <button class="btn btn-primary" onclick="searchPlayers()">
                        <i class="fas fa-search"></i>
                        Search
                    </button>
                </div>

                <div class="friends-tabs">
                    <button class="tab-btn active" onclick="showFriendsTab('online')">Online</button>
                    <button class="tab-btn" onclick="showFriendsTab('all')">All Friends (0)</button>
                    <button class="tab-btn" onclick="showFriendsTab('pending')">Pending (0)</button>
                </div>

                <div class="friends-list" id="friends-online-list">
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <p>No friends online</p>
                    </div>
                </div>

                <div class="friends-list" id="friends-all-list" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-user-plus"></i>
                        <p>No friends added yet</p>
                    </div>
                </div>

                <div class="friends-list" id="friends-pending-list" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-clock"></i>
                        <p>No pending friend requests</p>
                    </div>
                </div>
            </section>

            <!-- Inventory Section -->
            <section id="inventory-section" class="content-section">
                <div class="content-header">
                    <h2>Inventory</h2>
                    <p>Your items and cosmetics</p>
                </div>

                <div class="inventory-filters">
                    <button class="filter-btn active">All Items</button>
                    <button class="filter-btn">Outfits</button>
                    <button class="filter-btn">Back Blings</button>
                    <button class="filter-btn">Pickaxes</button>
                    <button class="filter-btn">Gliders</button>
                </div>

                <div class="inventory-grid">
                    <div class="inventory-item">
                        <div class="item-icon default-skin"></div>
                        <div class="item-name">Default Skin</div>
                        <div class="item-rarity">Common</div>
                    </div>
                    <div class="inventory-item">
                        <div class="item-icon default-pickaxe"></div>
                        <div class="item-name">Default Pickaxe</div>
                        <div class="item-rarity">Common</div>
                    </div>
                    <div class="inventory-item locked">
                        <div class="item-icon locked-item"></div>
                        <div class="item-name">Locked Item</div>
                        <div class="item-rarity">Rare</div>
                    </div>
                </div>
            </section>

            <!-- Statistics Section -->
            <section id="stats-section" class="content-section">
                <div class="content-header">
                    <h2>Statistics</h2>
                    <p>Your gameplay statistics</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Battle Royale</h3>
                        <div class="stat-item">
                            <span class="stat-label">Matches Played:</span>
                            <span class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Wins:</span>
                            <span class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Win Rate:</span>
                            <span class="stat-value">0%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">K/D Ratio:</span>
                            <span class="stat-value">0.00</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <h3>Season Progress</h3>
                        <div class="stat-item">
                            <span class="stat-label">Season Level:</span>
                            <span class="stat-value">1</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Battle Pass Tier:</span>
                            <span class="stat-value">1</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 10%"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Security & Sessions Section -->
            <section id="sessions-section" class="content-section">
                <div class="content-header">
                    <h2>Security & Active Sessions</h2>
                    <p>Manage your active sessions and security settings</p>
                </div>

                <div class="security-controls">
                    <button class="btn btn-danger" onclick="terminateAllSessions()">
                        <i class="fas fa-sign-out-alt"></i> Log Out All Devices
                    </button>
                    <button class="btn btn-secondary" onclick="loadActiveSessions()">
                        <i class="fas fa-sync"></i> Refresh Sessions
                    </button>
                </div>

                <div class="sessions-container">
                    <div id="sessions-list" class="sessions-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading sessions...
                        </div>
                    </div>
                </div>
            </section>

            <!-- Creator Code Section -->
            <section id="creator-code-section" class="content-section">
                <div class="content-header">
                    <h2>Creator Code</h2>
                    <p>Support-a-Creator program</p>
                </div>

                <div id="creator-code-status">
                    <div class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i> Loading...
                    </div>
                </div>

                <div id="creator-code-has-code" style="display: none;">
                    <div class="dashboard-card creator-code-card">
                        <div class="card-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="card-title">Your Creator Code</div>
                        <div class="card-value" id="my-creator-code">-</div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-coins"></i></div>
                            <div class="card-title">Total Earnings</div>
                            <div class="card-value" id="creator-earnings">0 V-Bucks</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-users"></i></div>
                            <div class="card-title">Total Uses</div>
                            <div class="card-value" id="creator-uses">0</div>
                        </div>
                    </div>

                    <button class="btn btn-danger" onclick="deleteMyCreatorCode()">
                        <i class="fas fa-trash"></i> Delete My Code
                    </button>
                </div>

                <div id="creator-code-pending" style="display: none;">
                    <div class="alert alert-info">
                        <i class="fas fa-clock"></i>
                        Your creator code request "<span id="pending-code-name"></span>" is pending review.
                    </div>
                </div>

                <div id="creator-code-request" style="display: none;">
                    <div class="content-header">
                        <h3>Request a Creator Code</h3>
                    </div>
                    <form class="profile-form" id="creator-code-form">
                        <div class="form-group">
                            <label for="creator-code-input" class="form-label">Creator Code</label>
                            <input type="text" id="creator-code-input" class="form-input" placeholder="Enter your desired code (3-16 chars)" maxlength="16">
                            <small class="form-hint">Alphanumeric characters, underscores, and dashes only.</small>
                        </div>
                        <div class="form-group">
                            <label for="creator-code-reason" class="form-label">Why do you want a creator code? (Optional)</label>
                            <textarea id="creator-code-reason" class="form-input" rows="3" placeholder="Tell us about your content..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Submit Request
                        </button>
                    </form>
                </div>
            </section>

            <!-- Moderation Panel Section -->
            <section id="moderation-section" class="content-section">
                <div class="content-header">
                    <h2>Moderation Panel</h2>
                    <p>Manage players, tickets, and creator codes</p>
                </div>

                <div class="mod-tabs">
                    <button class="tab-btn active" onclick="showModTab('players')">Players</button>
                    <button class="tab-btn" onclick="showModTab('tickets')">Tickets <span class="badge badge-warning" id="mod-tickets-badge" style="display:none;">0</span></button>
                    <button class="tab-btn" onclick="showModTab('pending-codes')">Pending Codes</button>
                    <button class="tab-btn" onclick="showModTab('all-codes')">All Codes</button>
                    <button class="tab-btn" onclick="showModTab('code-stats')">Statistics</button>
                </div>

                <!-- Players Management Tab -->
                <div id="mod-players" class="mod-tab-content">
                    <div class="admin-search">
                        <input type="text" id="mod-player-search" class="form-input" placeholder="Search players by name, email, or ID...">
                        <select id="mod-player-filter" class="form-input" style="width: auto;">
                            <option value="">All Players</option>
                            <option value="banned">Banned Only</option>
                            <option value="active">Active Only</option>
                        </select>
                        <button class="btn btn-primary" onclick="searchModPlayers()">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                    <div id="mod-players-list" class="users-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading players...
                        </div>
                    </div>
                </div>

                <!-- Tickets Tab -->
                <div id="mod-tickets" class="mod-tab-content" style="display: none;">
                    <div class="admin-search">
                        <select id="mod-ticket-status" class="form-input" style="width: auto;">
                            <option value="">All Status</option>
                            <option value="open">Open</option>
                            <option value="in_progress">In Progress</option>
                            <option value="resolved">Resolved</option>
                            <option value="closed">Closed</option>
                        </select>
                        <select id="mod-ticket-priority" class="form-input" style="width: auto;">
                            <option value="">All Priorities</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                        <button class="btn btn-secondary" onclick="loadModTickets()">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                    <div id="mod-tickets-list" class="tickets-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading tickets...
                        </div>
                    </div>
                </div>

                <!-- Ticket Detail View (hidden by default) -->
                <div id="mod-ticket-detail" class="mod-tab-content" style="display: none;">
                    <button class="btn btn-secondary" onclick="backToTicketsList()">
                        <i class="fas fa-arrow-left"></i> Back to Tickets
                    </button>
                    <div id="ticket-detail-content" class="ticket-detail">
                        <!-- Ticket detail will be loaded here -->
                    </div>
                </div>

                <div id="mod-pending-codes" class="mod-tab-content" style="display: none;">
                    <div id="pending-requests-list" class="requests-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading pending requests...
                        </div>
                    </div>
                </div>

                <div id="mod-all-codes" class="mod-tab-content" style="display: none;">
                    <div id="all-codes-list" class="codes-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading codes...
                        </div>
                    </div>
                </div>

                <div id="mod-code-stats" class="mod-tab-content" style="display: none;">
                    <div class="dashboard-grid" id="mod-stats-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-ticket-alt"></i></div>
                            <div class="card-title">Active Codes</div>
                            <div class="card-value" id="mod-active-codes">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-clock"></i></div>
                            <div class="card-title">Pending Requests</div>
                            <div class="card-value" id="mod-pending-count">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-coins"></i></div>
                            <div class="card-title">Total Earnings</div>
                            <div class="card-value" id="mod-total-earnings">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-percent"></i></div>
                            <div class="card-title">Commission Rate</div>
                            <div class="card-value" id="mod-commission-rate">1%</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Developer Panel Section -->
            <section id="developer-section" class="content-section">
                <div class="content-header">
                    <h2>Developer Panel</h2>
                    <p>Server configuration and management</p>
                </div>

                <div class="dev-tabs">
                    <button class="tab-btn active" onclick="showDevTab('overview')">Overview</button>
                    <button class="tab-btn" onclick="showDevTab('config')">Configuration</button>
                    <button class="tab-btn" onclick="showDevTab('config-files')">Config Files</button>
                    <button class="tab-btn" onclick="showDevTab('stats')">Statistics</button>
                </div>

                <!-- Overview Tab -->
                <div id="dev-overview" class="dev-tab-content">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-server"></i></div>
                            <div class="card-title">Server Status</div>
                            <div class="card-value" id="dev-server-status">Online</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-clock"></i></div>
                            <div class="card-title">Uptime</div>
                            <div class="card-value" id="dev-uptime">0h</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-microchip"></i></div>
                            <div class="card-title">Memory (Heap)</div>
                            <div class="card-value" id="dev-memory">0 MB</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-code-branch"></i></div>
                            <div class="card-title">Version</div>
                            <div class="card-value" id="dev-version">1.0.0</div>
                        </div>
                    </div>

                    <div class="content-header">
                        <h3>Quick Actions</h3>
                    </div>

                    <div class="quick-actions">
                        <button class="btn btn-primary" onclick="forceShopRotation()">
                            <i class="fas fa-sync"></i> Force Shop Rotation
                        </button>
                        <button class="btn btn-secondary" onclick="refreshServerStatus()">
                            <i class="fas fa-refresh"></i> Refresh Status
                        </button>
                        <button class="btn btn-warning" onclick="toggleMaintenance()">
                            <i class="fas fa-tools"></i> Toggle Maintenance
                        </button>
                    </div>
                </div>

                <!-- Configuration Tab -->
                <div id="dev-config" class="dev-tab-content" style="display: none;">
                    <div class="config-categories">
                        <div class="config-category">
                            <h4><i class="fas fa-bug"></i> Debug & Logging</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Debug Mode</label>
                                    <input type="checkbox" id="cfg-debug" onchange="updateConfig('debug', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Log Requests</label>
                                    <input type="checkbox" id="cfg-debugRequests" onchange="updateConfig('debugRequests', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Log Responses</label>
                                    <input type="checkbox" id="cfg-debugResponses" onchange="updateConfig('debugResponses', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Log IPs</label>
                                    <input type="checkbox" id="cfg-debugIps" onchange="updateConfig('debugIps', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Database Logging</label>
                                    <input type="checkbox" id="cfg-databaseLogging" onchange="updateConfig('databaseLogging', this.checked)">
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-tools"></i> Maintenance</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Maintenance Mode</label>
                                    <input type="checkbox" id="cfg-maintenanceMode" onchange="updateConfig('maintenanceMode', this.checked)">
                                </div>
                                <div class="config-item full-width">
                                    <label>Maintenance Message</label>
                                    <input type="text" id="cfg-maintenanceMessage" class="form-input" placeholder="Server maintenance message...">
                                    <button class="btn btn-sm btn-primary" onclick="updateConfig('maintenanceMessage', document.getElementById('cfg-maintenanceMessage').value)">Save</button>
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-shield-alt"></i> Rate Limiting</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Rate Limiting</label>
                                    <input type="checkbox" id="cfg-rateLimiting" onchange="updateConfig('rateLimiting', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Max Requests/min</label>
                                    <input type="number" id="cfg-maxRequestsPerMinute" class="form-input small" min="10" max="1000">
                                    <button class="btn btn-sm btn-primary" onclick="updateConfig('maxRequestsPerMinute', parseInt(document.getElementById('cfg-maxRequestsPerMinute').value))">Save</button>
                                </div>
                                <div class="config-item">
                                    <label>Auth Max Attempts</label>
                                    <input type="number" id="cfg-authMaxAttempts" class="form-input small" min="1" max="20">
                                    <button class="btn btn-sm btn-primary" onclick="updateConfig('authMaxAttempts', parseInt(document.getElementById('cfg-authMaxAttempts').value))">Save</button>
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-plug"></i> Features</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Plugins</label>
                                    <input type="checkbox" id="cfg-plugins" onchange="updateConfig('plugins', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Auto Shop Rotation</label>
                                    <input type="checkbox" id="cfg-autoShopRotation" onchange="updateConfig('autoShopRotation', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>XMPP Chat</label>
                                    <input type="checkbox" id="cfg-xmppEnable" onchange="updateConfig('xmppEnable', this.checked)">
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-calendar-alt"></i> Events</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Enable All Events</label>
                                    <input type="checkbox" id="cfg-bEnableAllEvents" onchange="updateConfig('bEnableAllEvents', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>STW Events</label>
                                    <input type="checkbox" id="cfg-bAllSTWEventsActivated" onchange="updateConfig('bAllSTWEventsActivated', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Geode Event</label>
                                    <input type="checkbox" id="cfg-bEnableGeodeEvent" onchange="updateConfig('bEnableGeodeEvent', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Crack In The Sky</label>
                                    <input type="checkbox" id="cfg-bEnableCrackInTheSky" onchange="updateConfig('bEnableCrackInTheSky', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Cube Lightning</label>
                                    <input type="checkbox" id="cfg-bEnableCubeLightning" onchange="updateConfig('bEnableCubeLightning', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Cube Lake</label>
                                    <input type="checkbox" id="cfg-bEnableCubeLake" onchange="updateConfig('bEnableCubeLake', this.checked)">
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-database"></i> Database</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Auto Backup</label>
                                    <input type="checkbox" id="cfg-databaseBackup" onchange="updateConfig('databaseBackup', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Backup Interval (min)</label>
                                    <input type="number" id="cfg-databaseBackupInterval" class="form-input small" min="5" max="1440">
                                    <button class="btn btn-sm btn-primary" onclick="updateConfig('databaseBackupInterval', parseInt(document.getElementById('cfg-databaseBackupInterval').value))">Save</button>
                                </div>
                                <div class="config-item">
                                    <label>Pretty JSON</label>
                                    <input type="checkbox" id="cfg-getJsonSpacing" onchange="updateConfig('getJsonSpacing', this.checked)">
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-gamepad"></i> Game Defaults</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Grant Founders Packs</label>
                                    <input type="checkbox" id="cfg-bGrantFoundersPacks" onchange="updateConfig('bGrantFoundersPacks', this.checked)">
                                </div>
                                <div class="config-item">
                                    <label>Complete Seasonal Quests</label>
                                    <input type="checkbox" id="cfg-bCompletedSeasonalQuests" onchange="updateConfig('bCompletedSeasonalQuests', this.checked)">
                                </div>
                            </div>
                        </div>

                        <div class="config-category">
                            <h4><i class="fas fa-lock"></i> SSL / HTTPS</h4>
                            <div class="config-options">
                                <div class="config-item">
                                    <label>Protocol</label>
                                    <select id="cfg-protocol" class="form-input small" onchange="updateConfig('protocol', this.value)">
                                        <option value="http">HTTP</option>
                                        <option value="https">HTTPS</option>
                                    </select>
                                </div>
                                <div class="config-item full-width">
                                    <label>SSL Certificate Path</label>
                                    <input type="text" id="cfg-sslCertPath" class="form-input" placeholder="config/ssl/cert.pem">
                                    <button class="btn btn-sm btn-primary" onclick="updateConfig('sslCertPath', document.getElementById('cfg-sslCertPath').value)">Save</button>
                                </div>
                                <div class="config-item full-width">
                                    <label>SSL Key Path</label>
                                    <input type="text" id="cfg-sslKeyPath" class="form-input" placeholder="config/ssl/key.pem">
                                    <button class="btn btn-sm btn-primary" onclick="updateConfig('sslKeyPath', document.getElementById('cfg-sslKeyPath').value)">Save</button>
                                </div>
                                <div class="config-item">
                                    <label>Secure Cookies</label>
                                    <input type="checkbox" id="cfg-secureCookies" onchange="updateConfig('secureCookies', this.checked)">
                                </div>
                                <div class="ssl-status-info" id="ssl-status-info">
                                    <small class="form-hint"><i class="fas fa-info-circle"></i> Changing protocol requires a server restart.</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Config Files Tab -->
                <div id="dev-config-files" class="dev-tab-content" style="display: none;">
                    <div class="config-files-list">
                        <div class="config-file-item" onclick="loadConfigFile('experience.json')">
                            <i class="fas fa-file-code"></i>
                            <span>experience.json</span>
                            <small>XP and level configuration</small>
                        </div>
                        <div class="config-file-item" onclick="loadConfigFile('game-servers.json')">
                            <i class="fas fa-file-code"></i>
                            <span>game-servers.json</span>
                            <small>Game servers and regions</small>
                        </div>
                        <div class="config-file-item" onclick="loadConfigFile('shop.json')">
                            <i class="fas fa-file-code"></i>
                            <span>shop.json</span>
                            <small>Shop configuration</small>
                        </div>
                        <div class="config-file-item" onclick="loadConfigFile('motd.json')">
                            <i class="fas fa-file-code"></i>
                            <span>motd.json</span>
                            <small>Message of the Day</small>
                        </div>
                    </div>

                    <div id="config-file-editor" style="display: none;">
                        <div class="editor-header">
                            <h4><i class="fas fa-edit"></i> Editing: <span id="editing-filename"></span></h4>
                            <div class="editor-actions">
                                <button class="btn btn-primary" onclick="saveConfigFile()">
                                    <i class="fas fa-save"></i> Save
                                </button>
                                <button class="btn btn-secondary" onclick="closeConfigEditor()">
                                    <i class="fas fa-times"></i> Close
                                </button>
                            </div>
                        </div>
                        <textarea id="config-file-content" class="config-editor"></textarea>
                    </div>
                </div>

                <!-- Statistics Tab -->
                <div id="dev-stats" class="dev-tab-content" style="display: none;">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-server"></i></div>
                            <div class="card-title">Node.js Version</div>
                            <div class="card-value" id="dev-node-version">-</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-desktop"></i></div>
                            <div class="card-title">Platform</div>
                            <div class="card-value" id="dev-platform">-</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-memory"></i></div>
                            <div class="card-title">System RAM</div>
                            <div class="card-value" id="dev-system-ram">-</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-hdd"></i></div>
                            <div class="card-title">CPUs</div>
                            <div class="card-value" id="dev-cpus">-</div>
                        </div>
                    </div>

                    <div class="content-header">
                        <h3>Database Statistics</h3>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-database"></i></div>
                            <div class="card-title">Database Type</div>
                            <div class="card-value" id="dev-db-type">JSON</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-users"></i></div>
                            <div class="card-title">Total Users</div>
                            <div class="card-value" id="dev-db-users">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-save"></i></div>
                            <div class="card-title">Backup Status</div>
                            <div class="card-value" id="dev-db-backup">Enabled</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admin Panel Section -->
            <section id="admin-section" class="content-section">
                <div class="content-header">
                    <h2>Admin Panel</h2>
                    <p>Full server administration</p>
                </div>

                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('users')">Users</button>
                    <button class="tab-btn" onclick="showAdminTab('stats')">Statistics</button>
                    <button class="tab-btn" onclick="showAdminTab('audit')">Audit Log</button>
                    <button class="tab-btn" onclick="showAdminTab('settings')">Settings</button>
                </div>

                <div id="admin-users" class="admin-tab-content">
                    <div class="admin-search">
                        <input type="text" id="admin-user-search" class="form-input" placeholder="Search users by name, email, or ID...">
                        <select id="admin-user-role-filter" class="form-input" style="width: auto;">
                            <option value="">All Roles</option>
                            <option value="player">Players</option>
                            <option value="moderator">Moderators</option>
                            <option value="developer">Developers</option>
                            <option value="admin">Admins</option>
                        </select>
                        <button class="btn btn-primary" onclick="searchAdminUsers()">
                            <i class="fas fa-search"></i> Search
                        </button>
                        <button class="btn btn-secondary" onclick="exportUsers()">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                    </div>
                    <div id="admin-users-list" class="users-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading users...
                        </div>
                    </div>
                </div>

                <div id="admin-stats" class="admin-tab-content" style="display: none;">
                    <div class="content-header">
                        <h3>User Statistics</h3>
                    </div>
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-users"></i></div>
                            <div class="card-title">Total Users</div>
                            <div class="card-value" id="admin-total-users">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-ban"></i></div>
                            <div class="card-title">Banned Users</div>
                            <div class="card-value" id="admin-banned-users">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-crown"></i></div>
                            <div class="card-title">Admins</div>
                            <div class="card-value" id="admin-admin-count">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-gavel"></i></div>
                            <div class="card-title">Moderators</div>
                            <div class="card-value" id="admin-mod-count">0</div>
                        </div>
                    </div>

                    <div class="content-header">
                        <h3>Activity Statistics</h3>
                    </div>
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-user-clock"></i></div>
                            <div class="card-title">Active (24h)</div>
                            <div class="card-value" id="admin-active-24h">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-calendar-week"></i></div>
                            <div class="card-title">Active (7d)</div>
                            <div class="card-value" id="admin-active-7d">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-calendar-alt"></i></div>
                            <div class="card-title">Active (30d)</div>
                            <div class="card-value" id="admin-active-30d">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-user-plus"></i></div>
                            <div class="card-title">New Today</div>
                            <div class="card-value" id="admin-new-today">0</div>
                        </div>
                    </div>

                    <div class="content-header">
                        <h3>Ticket Statistics</h3>
                    </div>
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-envelope-open"></i></div>
                            <div class="card-title">Open Tickets</div>
                            <div class="card-value" id="admin-tickets-open">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-spinner"></i></div>
                            <div class="card-title">In Progress</div>
                            <div class="card-value" id="admin-tickets-progress">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-exclamation-triangle"></i></div>
                            <div class="card-title">High Priority</div>
                            <div class="card-value" id="admin-tickets-high">0</div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="fas fa-check-circle"></i></div>
                            <div class="card-title">Total Resolved</div>
                            <div class="card-value" id="admin-tickets-resolved">0</div>
                        </div>
                    </div>
                </div>

                <div id="admin-audit" class="admin-tab-content" style="display: none;">
                    <div class="admin-search">
                        <select id="audit-action-filter" class="form-input" style="width: auto;">
                            <option value="">All Actions</option>
                            <option value="ban_user">Ban User</option>
                            <option value="unban_user">Unban User</option>
                            <option value="change_role">Change Role</option>
                            <option value="update_config">Update Config</option>
                            <option value="close_ticket">Close Ticket</option>
                            <option value="delete_ticket">Delete Ticket</option>
                        </select>
                        <input type="text" id="audit-search" class="form-input" placeholder="Search by user or action...">
                        <button class="btn btn-primary" onclick="loadAuditLog()">
                            <i class="fas fa-search"></i> Search
                        </button>
                        <button class="btn btn-secondary" onclick="loadAuditLog()">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                    <div id="audit-log-list" class="audit-log-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading audit log...
                        </div>
                    </div>
                    <div class="pagination" id="audit-pagination">
                        <button class="btn btn-secondary" id="audit-prev" onclick="loadAuditLogPage(-1)" disabled>
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span id="audit-page-info">Page 1</span>
                        <button class="btn btn-secondary" id="audit-next" onclick="loadAuditLogPage(1)">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <div id="admin-settings" class="admin-tab-content" style="display: none;">
                    <form class="settings-form" id="admin-settings-form">
                        <div class="form-group">
                            <label for="admin-commission" class="form-label">Creator Code Commission (%)</label>
                            <input type="number" id="admin-commission" class="form-input" min="0" max="100" value="1">
                            <small class="form-hint">Percentage of purchases credited to creators</small>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </form>
                </div>
            </section>

            <!-- Support Section (Player Tickets) -->
            <section id="support-section" class="content-section">
                <div class="content-header">
                    <h2>Support</h2>
                    <p>Need help? Create a support ticket and our team will assist you.</p>
                </div>

                <div class="support-tabs">
                    <button class="tab-btn active" onclick="showSupportTab('my-tickets')">My Tickets</button>
                    <button class="tab-btn" onclick="showSupportTab('new-ticket')">New Ticket</button>
                </div>

                <!-- My Tickets Tab -->
                <div id="support-my-tickets" class="support-tab-content">
                    <div id="my-tickets-list" class="tickets-list">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading your tickets...
                        </div>
                    </div>
                </div>

                <!-- New Ticket Tab -->
                <div id="support-new-ticket" class="support-tab-content" style="display: none;">
                    <form class="profile-form" id="new-ticket-form">
                        <div class="form-group">
                            <label for="ticket-subject" class="form-label">Subject</label>
                            <input type="text" id="ticket-subject" class="form-input" placeholder="Brief description of your issue" maxlength="100" required>
                        </div>
                        <div class="form-group">
                            <label for="ticket-priority" class="form-label">Priority</label>
                            <select id="ticket-priority" class="form-input">
                                <option value="low">Low - General question</option>
                                <option value="medium" selected>Medium - Need assistance</option>
                                <option value="high">High - Urgent issue</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ticket-message" class="form-label">Message</label>
                            <textarea id="ticket-message" class="form-input" rows="6" placeholder="Please describe your issue in detail..." maxlength="2000" required></textarea>
                            <small class="form-hint">Minimum 10 characters, maximum 2000 characters</small>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Submit Ticket
                        </button>
                    </form>
                </div>

                <!-- Ticket Detail View -->
                <div id="support-ticket-detail" class="support-tab-content" style="display: none;">
                    <button class="btn btn-secondary" onclick="backToMyTickets()">
                        <i class="fas fa-arrow-left"></i> Back to My Tickets
                    </button>
                    <div id="player-ticket-detail-content" class="ticket-detail">
                        <!-- Ticket detail will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="content-section">
                <div class="content-header">
                    <h2>Settings</h2>
                    <p>Configure your preferences</p>
                </div>

                <form class="settings-form">
                    <div class="form-group">
                        <label class="form-label">Privacy Settings</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="show-online" checked>
                            <label for="show-online">Show online status</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="allow-friend-requests" checked>
                            <label for="allow-friend-requests">Allow friend requests</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="join-in-progress">
                            <label for="join-in-progress">Allow join in progress</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="language" class="form-label">Language</label>
                        <select id="language" class="form-input">
                            <option value="en">English</option>
                            <option value="fr">French</option>
                            <option value="es">Spanish</option>
                            <option value="de">German</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="region" class="form-label">Region</label>
                        <select id="region" class="form-input">
                            <option value="na">North America</option>
                            <option value="eu">Europe</option>
                            <option value="asia">Asia</option>
                            <option value="oce">Oceania</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Save Settings
                    </button>
                </form>

                <div class="content-header">
                    <h3>Danger Zone</h3>
                </div>

                <div class="danger-zone">
                    <button class="btn btn-danger" onclick="confirmDeleteAccount()">
                        <i class="fas fa-trash"></i>
                        Delete Account
                    </button>
                </div>
            </section>
        </main>
    </div>

    <script src="../js/common.js"></script>
    <script src="../js/header.js"></script>
    <script src="../js/dashboard.js"></script>
</body>
</html>
